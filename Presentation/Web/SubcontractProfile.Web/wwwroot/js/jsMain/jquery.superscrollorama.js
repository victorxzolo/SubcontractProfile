!function(I){I.superscrollorama=function(t){var y={};y.settings=I.extend({},{isVertical:!0,triggerAtCenter:!0,playoutAnimations:!0,reverse:!0},t);var N,o,T=I(window),x=[],A=[],V={x:0,y:0},e=!1;function R(t){var e={top:parseFloat(t.css("top")),left:parseFloat(t.css("left"))};return isNaN(e.top)&&(e.top=0),isNaN(e.left)&&(e.left=0),e}function s(){e&&(r(),e=!1)}function U(t){t.el.css("position",t.origPositioning.pos),t.el.css("top",t.origPositioning.top),t.el.css("left",t.origPositioning.left)}function D(t,e){t&&(t.totalProgress?t.totalProgress(e).pause():t.progress(e).pause())}function r(){var t,e,s,i=y.settings.isVertical?T.scrollTop()+V.y:T.scrollLeft()+V.x,n=y.settings.triggerAtCenter?y.settings.isVertical?-T.height()/2:-T.width()/2:0,o=x.length;for(t=0;t<o;t++){var r=x[t],a=r.target,l=r.offset;if("string"==typeof a?(N=I(a).offset()||{},e=y.settings.isVertical?N.top+V.y:N.left+V.x,l+=n):"number"==typeof a?e=a:I.isFunction(a)?e=a.call(this):(N=a.offset(),e=y.settings.isVertical?N.top+V.y:N.left+V.x,l+=n),s=(e+=l)+r.dur,e<i&&i<s&&"TWEENING"!==r.state&&(r.state="TWEENING",r.start=e,r.end=s),i<e&&"BEFORE"!==r.state&&r.reverse)y.settings.playoutAnimations||0===r.dur?r.tween.reverse():D(r.tween,0),r.state="BEFORE";else if(s<i&&"AFTER"!==r.state)y.settings.playoutAnimations||0===r.dur?r.tween.play():D(r.tween,1),r.state="AFTER";else if("TWEENING"===r.state){var p=!1;if(r.tween.repeat&&(p=-1===r.tween.repeat()),p){var f=r.tween.totalProgress();null!==r.playeadLastPosition&&f!==r.playeadLastPosition||(1===f?r.tween.yoyo()?r.tween.reverse():r.tween.totalProgress(0).play():r.tween.play()),r.playeadLastPosition=f}else D(r.tween,(i-r.start)/(r.end-r.start))}}var c=A.length;for(t=0;t<c;t++){var g=A[t],u=g.el;if("PINNED"!==g.state){var d=g.spacer.offset();"UPDATE"===g.state&&U(g),e=y.settings.isVertical?d.top+V.y:d.left+V.x;var v=(s=(e+=g.offset)+g.dur)<i&&"BEFORE"===g.state||i<e&&"AFTER"===g.state;(e<i&&i<s||v)&&(g.pushFollowers&&"static"===u.css("position")&&u.css("position","relative"),g.origPositioning={pos:u.css("position"),top:g.spacer.css("top"),left:g.spacer.css("left")},g.fixedPositioning={top:y.settings.isVertical?-g.offset:d.top,left:y.settings.isVertical?d.left:-g.offset},u.css("position","fixed"),u.css("will-change","top"),u.css("top",g.fixedPositioning.top),u.css("left",g.fixedPositioning.left),g.pinStart=e,g.pinEnd=s,g.pushFollowers?y.settings.isVertical?g.spacer.height(g.dur+u.outerHeight(!0)):g.spacer.width(g.dur+u.outerWidth(!0)):"absolute"===g.origPositioning.pos?(g.spacer.width(0),g.spacer.height(0)):y.settings.isVertical?g.spacer.height(u.outerHeight(!0)):g.spacer.width(u.outerWidth(!0)),"UPDATE"===g.state?g.anim&&D(g.anim,0):g.onPin&&g.onPin("AFTER"===g.state),g.state="PINNED")}if("PINNED"===g.state)if(i<g.pinStart||i>g.pinEnd){var h=i<g.pinStart;g.state=h?"BEFORE":"AFTER",D(g.anim,h?0:1);var w=h?0:g.dur;y.settings.isVertical?g.spacer.height(g.pushFollowers?w:0):g.spacer.width(g.pushFollowers?w:0);var P=g.fixedPositioning.top-R(g.el).top,E=g.fixedPositioning.left-R(g.el).left;if(U(g),!g.pushFollowers||"absolute"===g.origPositioning.pos){var m;"relative"===g.origPositioning.pos?(m=y.settings.isVertical?parseFloat(g.origPositioning.top):parseFloat(g.origPositioning.left),isNaN(m)&&(m=0)):m=y.settings.isVertical?g.spacer.position().top:g.spacer.position().left;var F=y.settings.isVertical?"top":"left";g.el.css(F,m+w)}0!==P&&g.el.css("top",R(g.el).top-P),0!==E&&g.el.css("left",R(g.el).left-E),g.onUnpin&&g.onUnpin(!h)}else g.anim&&D(g.anim,(i-g.pinStart)/(g.pinEnd-g.pinStart))}}return y.addTween=function(t,e,s,i,n){return e.pause(),x.push({target:t,tween:e,offset:i||0,dur:s||0,reverse:void 0!==n?n:y.settings.reverse,state:"BEFORE"}),y},y.pin=function(t,e,s){"string"==typeof t&&(t=I(t));(s=I.extend({},{offset:0,pushFollowers:!0},s)).anim&&s.anim.pause();var i=I('<div class="superscrollorama-pin-spacer"></div>');return i.css("position","relative"),i.css("top",t.css("top")),i.css("left",t.css("left")),t.before(i),A.push({el:t,state:"BEFORE",dur:e,offset:s.offset,anim:s.anim,pushFollowers:s.pushFollowers,spacer:i,onPin:s.onPin,onUnpin:s.onUnpin}),y},y.updatePin=function(t,e,s){"string"==typeof t&&(t=I(t)),s.anim&&s.anim.pause();var i=A.length;for(o=0;o<i;o++){var n=A[o];t.get(0)===n.el.get(0)&&(e&&(n.dur=e),s.anim&&(n.anim=s.anim),s.offset&&(n.offset=s.offset),void 0!==s.pushFollowers&&(n.pushFollowers=s.pushFollowers),s.onPin&&(n.onPin=s.onPin),s.onUnpin&&(n.onUnpin=s.onUnpin),(e||s.anim||s.offset)&&"PINNED"===n.state&&(n.state="UPDATE",r()))}return y},y.removeTween=function(t,e,s){var i=x.length;void 0===s&&(s=!0);for(var n=0;n<i;n++){var o=x[n];o.target!==t||e&&o.tween!==e||(x.splice(n,1),s&&D(o.tween,0),i--,n--)}return y},y.removePin=function(t,e){"string"==typeof t&&(t=I(t)),void 0===e&&(e=!0);for(var s=A.length,i=0;i<s;i++){var n=A[i];n.el.is(t)&&(A.splice(i,1),e&&(n.spacer.remove(),U(n),n.anim&&D(n.anim,0)),s--,i--)}return y},y.setScrollContainerOffset=function(t,e){return V.x=t,V.y=e,y},y.triggerCheckAnim=function(t){return t?r():e=!0,y},T.scroll(function(){e=!0}),TweenLite.ticker.addEventListener("tick",s),y}}(jQuery);