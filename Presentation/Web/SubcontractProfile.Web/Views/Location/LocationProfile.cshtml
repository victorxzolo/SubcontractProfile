
@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer Localizer


@{ Layout = "~/Views/Shared/_Layout.cshtml"; ViewBag.Title = "Location Profile";
}
    <style>
        .was-validated .custom-select:invalid + .select2 .select2-selection {
            border-color: #dc3545 !important;
        }

        .was-validated .custom-select:valid + .select2 .select2-selection {
            border-color: #28a745 !important;
        }

        *:focus {
            outline: 0px;
        }
    </style>
<div id="pageID" style="display:none;">LocationProfile</div>

<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">

    <div class="skills layout-spacing ">
        <div class="widget-content widget-content-area">
            <h3 class="">@Localizer["Location"]</h3>

            <div class="widget-content1">

                <div class="form-row mb-4">
                    @*<div class="form-group col-md-12">
                            <label for="inputEmail4">ประเภทผู้สมัคร</label> <br />
                            <div class="custom-control custom-radio custom-control-inline">
                                <input type="radio" id="rdoCustomerTypeSub" name="customRadioSucRegis" class="custom-control-input">
                                <label class="custom-control-label" for="customRadioInline1">New Subcontract</label>
                            </div>
                            <div class="custom-control custom-radio custom-control-inline">
                                <input type="radio" id="rdoCustomerTypeDealer" name="customRadioSucRegis" class="custom-control-input">
                                <label class="custom-control-label" for="customRadioInline2">Dealer</label>
                            </div>
                        </div>*@

                    <div class="form-group col-md-6">
                        <label for="inputEmail4">@Localizer["LocationCode"]</label>
                        <input type="text" class="form-control" id="inputLocationCodeMain" placeholder="@Localizer["LocationCode"]">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPassword4">@Localizer["LocationNameAilas"]</label>
                        <input type="text" class="form-control" id="inputLocationNameAilas" placeholder="@Localizer["LocationNameAilas"]">
                    </div>

                    <div class="form-group col-md-6">
                        <label for="inputEmail4">@Localizer["LocationNameThai"]</label>
                        <input type="text" class="form-control" id="inputLocationNameTh" placeholder="@Localizer["LocationNameThai"]">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPassword4">@Localizer["LocationNameEng"]</label>
                        <input type="text" class="form-control" maxlength="13" id="inputLocationNameEn" placeholder="@Localizer["LocationNameEng"]">
                    </div>

                    <div class="form-group col-md-6">
                        <label for="inputEmail4">@Localizer["StorageLocation"]</label>
                        <input type="text" class="form-control" id="inputStorageLocation" placeholder="@Localizer["StorageLocation"]">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPassword4">@Localizer["PhoneNo"]</label>
                        <input type="text" class="form-control" maxlength="13" id="inputPhoneNoMain" placeholder="@Localizer["PhoneNo"]">
                    </div>

                </div>

                <div style="text-align:center">

                    <button id="btnMainClearLoc" type="button" class="btn btn-dark mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="15" y1="9" x2="9" y2="15"></line>
                            <line x1="9" y1="9" x2="15" y2="15"></line>
                        </svg> @Localizer["Reset"]
                    </button>
                    <button id="btnSearchLoc" type="button" class="btn btn-success mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>  @Localizer["Search"]
                    </button>

                </div>


            </div>


            <br />
            <div class="widget-heading">
                <h3 class="">@Localizer["SearchResult"]</h3>

            </div>
            <div class="col-md-12 text-right mb-1">
                <button id="btnAdd" type="button" class="btn btn-success mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                         stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="16"></line>
                        <line x1="8" y1="12" x2="16" y2="12"></line>
                    </svg> @Localizer["Add"]
                </button>

            </div>


            <div class="table-responsive mb-4 mt-4">
                <table id="tbSearchLocationResult" class="table table-hover" style="width:100%">
                    <thead>
                        <tr>
                            <th class="text-center">@Localizer["Edit"]</th>
                            <th>@Localizer["LocationCode"] </th>
                            <th>@Localizer["LocationNameThai"] </th>
                            <th>@Localizer["LocationNameEng"] </th>
                            @*<th>Location Name Alias </th>*@
                        <th>@Localizer["Storage"] </th>
                            @*<th>Address </th>*@
                        </tr>
                    </thead>
                </table>
            </div>

        </div>
    </div>

</div>


@section modalpanel {

    <div id="AddEditModal" class="modal fade"  role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="hTitleEdit" class="modal-title">@Localizer["EditLocation"]</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <form id="frNew" class="needs-validation" novalidate>
                        <div class="container">
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["CompanyName"]:</label>
                                </div>
                                <div class="col-sm-10">
                                    <label id="lblcompanyName"></label>
                                </div>
                            </div>
                            @*<br />
        <div class="row">
            <div class="col-sm-2">
                <label>Register Type:</label>
            </div>
            <div class="col-sm-10">
                <input type="radio" id="rdoCompanyTypeNew" name="CompType" value="newsub">
                <label for="new">New Subcontract</label>&nbsp;&nbsp;
                <input type="radio" id="rdoCompanyTypeDealer" name="CompType" value="dealer">
                <label for="deal">Dealer</label>
            </div>
        </div>*@
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span>@Localizer["LocationCode"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputLocationCode" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorLocationCode"].
                                    </div>
                                    <span class='chklocation' style="color:red;display:none;"></span>
                                </div>
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["LocationNameAilas"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputLocationAlias" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorLocationNameAlias"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["LocationNameThai"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputLocationNameT" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorLocationNameThai"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["LocationNameEng"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputLocationNameE" style="width:300px" class="form-control">
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["StorageLocation"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputStorage" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["ShipTo"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputShip" style="width:300px" class="form-control">
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["OutofServiceStoragelocation"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inoutOutStorage" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["VatbranchNumber"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputVat" style="width:300px" class="form-control">
                                </div>
                            </div>
                            <br />

                            <h5>@Localizer["ContractPhone"]</h5>
                            <hr>
                            <div class="row">
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["PhoneNo"] :</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputPhoneNo" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorPhoneNo"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span>  @Localizer["Companymaincontractphone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputMainPhone" maxlength="20" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorCompanymaincontractphone"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["Installationscontractphone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputInstallationsPhone" maxlength="20" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorInstallationscontractphone"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span>  @Localizer["Maintenencecontractphone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputMaintenencePhone" maxlength="20" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorMaintenencecontractphone"]
                                    </div>
                                </div>
                            </div>
                            <br />

                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Inventorycontractphone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputInventoryPhone" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["Paymentcontractphone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputPaymentPhone" style="width:300px" class="form-control">
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Etccontractphone"]:</label>
                                </div>
                                <div class="col-sm-10">
                                    <input type="text" id="inputEtcPhone" style="width:300px" class="form-control">
                                </div>
                            </div>
                            <br />

                            <h5>@Localizer["ContractEmail"]</h5>
                            <hr>
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Companygroupmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputCompanyMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["Installationcontractmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputInstallationMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Maintanencecontractmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputMaintanenceMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label> @Localizer["Inventorycontractmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputInventoryMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Paymentcontractmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputPaymentMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["Etccontractmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputEtcMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                            </div>
                            <br />

                            <h5>@Localizer["Address"]</h5>
                            <hr>
                            @*<div class="row">
            <div class="col-sm-2">
                <label>@Localizer["LocationAddress"]:</label>
            </div>
            <div class="col-sm-4">
                <textarea id="inputLocationAddress" class="form-control" rows="2" style="width:300px;"></textarea>
            </div>
            <div class="col-sm-2">
                <label>@Localizer["PostAddress"]:</label>
            </div>
            <div class="col-sm-4">
                <textarea id="inputPostAddress" class="form-control" rows="2" style="width:300px;"></textarea>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2">
                <label>@Localizer["TaxAddress"]:</label>
            </div>
            <div class="col-sm-4">
                <textarea id="inputTaxAddress" class="form-control" rows="2" style="width:300px;"></textarea>
            </div><br />
            <div class="col-sm-2">
                <label>@Localizer["WTAddress"]:</label>
            </div>
            <div class="col-sm-4">
                <textarea id="inputWTAddress" class="form-control" rows="2" style="width:300px;"></textarea>
            </div>
        </div>
        <br />*@


                            <div class="container needs-validation-address" novalidate>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <label>@Localizer["AddressType"]</label>
                                    </div>
                                </div>
                                <br />
                                <div class="row" id="chkAddressType">
                                    <div class="col-sm-1">

                                    </div>


                                    <div class="col-sm-3">
                                        <div class="n-chk">
                                            <label class="new-control new-checkbox checkbox-primary">
                                                <input id="chkLocationBranch" type="checkbox" name="address_type_id" class="new-control-input" value="01" required>
                                                <span class="new-control-indicator"></span>@*@Localizer["BranchAddress"]*@
                                            </label>
                                        </div>

                                        <div class="n-chk">
                                            <label class="new-control new-checkbox checkbox-primary">
                                                <input id="chkLocationDoc" type="checkbox" name="address_type_id" class="new-control-input" value="04" required>
                                                <span class="new-control-indicator"></span>@*@Localizer["DocumentAddress"]*@@*ที่อยู่จัดส่งเอกสาร*@
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="n-chk">
                                            <label class="new-control new-checkbox checkbox-primary">
                                                <input id="chkLocationTax" type="checkbox" name="address_type_id" class="new-control-input" value="02" required>
                                                <span class="new-control-indicator"></span>@*@Localizer["TaxAddress"]*@@*ที่อยู่ตามใบกำกับภาษี*@
                                            </label>
                                        </div>
                                        <div class="n-chk">
                                            <label class="new-control new-checkbox checkbox-primary">
                                                <input id="chkLocationShip" type="checkbox" name="address_type_id" class="new-control-input" value="05" required>
                                                <span class="new-control-indicator"></span>@*@Localizer["ShippingAddress"]*@@*ที่อยู่จัดส่งสินค้า*@
                                            </label>
                                        </div>


                                    </div>
                                    <div class="col-sm-3">
                                        <div class="n-chk">
                                            <label class="new-control new-checkbox checkbox-primary">
                                                <input id="chkLocationWT" type="checkbox" name="address_type_id" class="new-control-input" value="03" required>
                                                <span class="new-control-indicator"></span>@*@Localizer["WTAddress"]*@@*ที่อยู่ตาม W/T*@
                                            </label>
                                        </div>
                                        <div class="n-chk">
                                            <label class="new-control new-checkbox checkbox-primary">
                                                <input id="chkLocationShipPOP" type="checkbox" name="address_type_id" class="new-control-input" value="06" required>
                                                <span class="new-control-indicator"></span>@*@Localizer["POPAddress"]*@@*ที่อยู่จัดส่ง POP*@
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <br />

                                <div class="row">
                                    <div class="col-sm-2">
                                        <input type="hidden" id="hdAddressID" />
                                        <label>@Localizer["HouseNo"]@*เลขที่*@ :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="row col-sm-12">
                                            <input type="text" id="txthomenumber" style="width:120px" class="form-control inputValidationAddress" required>

                                            <label>&nbsp;&nbsp;&nbsp;&nbsp;@Localizer["Moo"] :</label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <input type="text" id="txtVillageNo" style="width:110px" class="form-control">
                                            <div class="invalid-feedback">
                                                @Localizer["ErrorHouseNo"]
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                        <label>@Localizer["Village"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <input type="text" id="txtvillage" style="width:300px" class="form-control">
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-sm-2">
                                        <label>@Localizer["Building"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <input type="text" id="txtbuilding" style="width:300px" class="form-control">
                                    </div>
                                    <div class="col-sm-2">
                                        <label>@Localizer["Floor"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="row col-sm-12">
                                            <input type="text" id="txtfloor" style="width:120px" class="form-control">
                                            <label>&nbsp;&nbsp;&nbsp;&nbsp;@Localizer["Room"] :</label>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <input type="text" id="txtroom" style="width:110px" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-sm-2">
                                        <label>@Localizer["Soi"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <input type="text" id="txtsoi" style="width:300px" class="form-control">
                                    </div>


                                    <div class="col-sm-2">
                                        <label>@Localizer["street"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <input type="text" id="txtroad" style="width:300px" class="form-control">
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-sm-2">
                                        <label>@Localizer["Country"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="ddlcountry" name="country" class="custom-select inputValidationAddress" style="width:300px" required>
                                            <option value="">Select Country</option>
                                            <option value="THA">Thailand</option>
                                        </select>
                                        <div class="invalid-feedback">@Localizer["ErrorCountry"]</div>
                                    </div>

                                    <div class="col-sm-2">
                                        <label>@Localizer["Zone"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="ddlzone" name="ddlzone" class="custom-select inputValidationAddress" style="width:300px" required>
                                        </select>
                                        <div class="invalid-feedback">
                                            @Localizer["ErrorZone"]
                                        </div>
                                    </div>


                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-sm-2">
                                        <label>@Localizer["Province"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="ddlprovince" name="ddlprovince" class="custom-select inputValidationAddress ddlsearch" style="width:300px" required>
                                        </select>
                                        <div class="invalid-feedback">
                                            @Localizer["ErrorProvince"]
                                        </div>
                                    </div>

                                    <div class="col-sm-2">
                                        <label>@Localizer["District"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="ddldistrict" name="ddldistrict" class="custom-select inputValidationAddress ddlsearch" style="width:300px" required>
                                        </select>
                                        <div class="invalid-feedback">
                                            @Localizer["ErrorDistrict"]
                                        </div>
                                    </div>

                                </div>
                                <br />

                                <div class="row">
                                    <div class="col-sm-2">
                                        <label>@Localizer["Subdistrict"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="ddlsubdistrict" name="ddlsubdistrict" class="custom-select inputValidationAddress ddlsearch" style="width:300px" required>
                                        </select>
                                        <div class="invalid-feedback">
                                            @Localizer["ErrorSubdistrict"]
                                        </div>
                                    </div>

                                    <div class="col-sm-2">
                                        <label>@Localizer["Zipcode"] :</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="ddlzipcode" name="ddlzipcode" class="custom-select inputValidationAddress" style="width:300px" required>
                                        </select>
                                        <div class="invalid-feedback">@Localizer["ErrorZipcode"]</div>
                                    </div>
                                </div>

                                <br />
                                <div class="row">
                                    <div class="col-sm-6" style="text-align:right; ">
                                        <input type="button" id="btnClear" value="@Localizer["Reset"]" style="width:20%" class="btn btn-dark mb-2" />
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="button" id="btnAddAddress" value="@Localizer["AddAddress"]" style="width:20%" class="btn btn-success mb-2" />
                                    </div>
                                </div>
                                <br />
                                <div class="row col-sm-12">
                                    <div class="table-responsive">
                                        <table id="tbAddressResult" class="table table-bordered table-hover table-striped table-checkable table-highlight-head mb-4">
                                            <thead>
                                                <tr>
                                                    <th scope="col"></th>
                                                    <th scope="col"></th>
                                                    <th width="30%">@Localizer["AddressType"]</th>
                                                    <th width="50%">@Localizer["Address"]</th>
                                                    <th width="10%">@Localizer["Edit"]</th>
                                                    <th width="10%">@Localizer["Delete"]</th>

                                                </tr>
                                            </thead>
                                        </table>
                                    </div>

                                </div>
                            </div>

                            <br />
                            <h5>@Localizer["Bank"] </h5>
                            <hr>
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Bankcode"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputBankCode" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["BankName"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <div class="row col-sm-12">
                                        <input type="text" id="inputBankName" style="width:280px" class="form-control" required>
                                        <div class="invalid-feedback">
                                            @Localizer["ErrorBankName"]
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span>  @Localizer["BankAccountNo"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputBankAccountNo" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorBankAccountNo"]
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span>  @Localizer["BankAccountName"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputBankAccountName" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorBankAccountName"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["BankBranchNo"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputBankBranchNo" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["BankBranchName"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputBankBranchName" style="width:300px" class="form-control" required>
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorBankBranchName"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label><span style="color:red">*</span> @Localizer["BankAttachFile"]:</label>
                                </div>
                                <div class="col-sm-10">
                                    <div class="row col-sm-5">

                                        <div class="col-sm-12">
                                            <input type="hidden" id="hdupfileBankAttach" />
                                            <input type="file" class="custom-file-input" id="inputBankAttach" aria-describedby="uploadlHelp1" style="width:190px"
                                                   accept="image/jpeg,image/gif,image/png,image/bmp,image/tif,image/tiff,application/pdf">
                                            <label class="custom-file-label" for="inputBankAttach" id="lbfileBankAttach">@Localizer["ChooseFile"]</label>

                                            <div id="targetDiv" class="row">
                                                <a id="linkdownload" href="#" target="_blank"></a>
                                            </div>
                                            <div class="row">
                                                <small id="uploadlHelp1" class="form-text text-muted" style="margin-top:0;">@Localizer["ChooseFileType"]</small>
                                                <small id="uploadlHelp1" class="form-text text-muted" style="margin-top:0;">
                                                    @Localizer["SizeFile"]
                                                </small>
                                            </div>
                                        </div> 
                                        

                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["Panaltycontractphone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputPanaltyPhone" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label>@Localizer["Panaltycontractmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputPanaltyMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-2">
                                    <label>@Localizer["ContractPhone"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="inputContractPhone" style="width:300px" class="form-control">
                                </div>
                                <div class="col-sm-2">
                                    <label> @Localizer["ContractEmail"]:</label>
                                </div>
                                <div class="col-sm-4">
                                    <input type="email" id="inputContractMail" style="width:300px" class="form-control">
                                    <div class="invalid-feedback">
                                        @Localizer["ErrorEmail"]
                                    </div>
                                </div>


                            </div>


                        </div>

                        <br />

                        <input type="hidden" id="hdMode">
                        <input type="hidden" id="hdLocationId">
                        <input type="hidden" id="hdCompanyId">
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-power"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line></svg>
                                @Localizer["Close"]
                            </button>
                            <button id="btnSave" type="button" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-save"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                                @Localizer["Save"]
                            </button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
}

@section scripts {

    <script type="text/javascript">
        var ss = $(".basic").select2({
            tags: true,
        });

        var oTable;
        var oTableAddress;
        $(document).ready(function () {
            $(".ddlsearch").select2();
                inittbSearchResult();
            inittbAddressResult();
            BindAddressType();
                $("#btnSearchLoc").click(function (e) {

                    inittbSearchResult();
                });

                $("#btnMainClearLoc").click(function (e) {
                    clearMainData();
                });

                $("#btnAdd").click(function (e) {
                    openModal("new","");
                });

                $(".custom-file-input").on("change", function () {
                    var fileName = $(this).val().split("\\").pop();
                    $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
                });

                $('#inputBankAttach').change(function (e) {
                    e.preventDefault();
                    CheckFileUpload('inputBankAttach');
                });

                $('#btnSave').click(function () {
                    var forms = document.getElementsByClassName('needs-validation');
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(forms, function (form) {
                        if (Validateform() || ValidateUpload()) {
                                event.preventDefault();
                                event.stopPropagation();
                            } else {
                                onSave();
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add('was-validated');

                    });
                });

                $(document).on('show.bs.modal', '.modal', function () {
                    var zIndex = 1040 + (10 * $('.modal:visible').length);
                    $(this).css('z-index', zIndex);
                    setTimeout(function () {
                        $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
                    }, 0);
                });

                $(document).on('hidden.bs.modal', '.modal', function () {
                    $('.modal:visible').length && $(document.body).addClass('modal-open');
                });

                $('#ddlzone').change(function () {

                    BindDDLprovince($('#ddlzone option').filter(':selected').val());
                });

                $('#ddlprovince').change(function () {

                    BindDDLdistrict($('#ddlprovince option').filter(':selected').val());
                });
                $('#ddldistrict').change(function () {
                    BindDDLsubdistrict($('#ddldistrict option').filter(':selected').val());
                });
                $('#tbAddressResult').on('click', 'tbody .edit_btn', function () {
                    var data_row = oTableAddress.row($(this).closest('tr')).data();
                    oTableAddress.row($(this).closest('tr')).remove().draw();


                    $.ajax({
                        type: "POST",
                        url:  '@Url.Action("GetAddressById", "Location")',
                        data: { addressID: data_row.addressId },
                        dataType: "json",
                        success: function (data) {

                            $('#hdAddressID').val('');
                            $('#ddlcountry').val('');

                            $('#ddlprovince').val('');

                            $('#ddldistrict').val('');

                            $('#ddlsubdistrict').val('');

                            $('#ddlzipcode').val('');

                            $('#ddlzone').val('');

                            $('#txthomenumber').val('');
                            $('#txtVillageNo').val('');
                            $('#txtvillage').val('');
                            $('#txtbuilding').val('');
                            $('#txtfloor').val('');
                            $('#txtroom').val('');
                            $('#txtsoi').val('');
                            $('#txtroad').val('');


                            $('#chkAddressType input[type=checkbox]').each(function () {
                                $(this).prop('checked', false);

                            });


                            if (data.status) {
                                console.log(data.response);

                                $('#hdAddressID').val(data.response.AddressId);
                                $('#ddlcountry').val(data.response.Country)

                                $('#ddlprovince').val(data.response.ProvinceId)
                                $('#ddlprovince').trigger('change');

                                $('#ddldistrict').val(data.response.DistrictId)
                                $('#ddldistrict').trigger('change');

                                $('#ddlsubdistrict').val(data.response.SubDistrictId)

                                $('#ddlzipcode').val(data.response.ZipCode)

                                $('#ddlzone').val(data.response.RegionId)

                                $('#txthomenumber').val(data.response.HouseNo)
                                $('#txtVillageNo').val(data.response.Moo)
                                $('#txtvillage').val(data.response.VillageName)
                                $('#txtbuilding').val(data.response.Building)
                                $('#txtfloor').val(data.response.Floor)
                                $('#txtroom').val(data.response.RoomNo)
                                $('#txtsoi').val(data.response.Soi)
                                $('#txtroad').val(data.response.Road)

                                var addr_type_id = data.response.AddressTypeId
                                $(':checkbox').each(function (i) {

                                    if (addr_type_id == $(this).val()) {
                                        $(this).prop('checked', true);
                                    }
                                });
                            }
                            else {
                                bootbox.confirm({
                                    title: "System Information",
                                    message: data.message,
                                    buttons: {
                                        cancel: {
                                            label: '<i class="fa fa-times"></i> Cancel'
                                        }
                                    },
                                    callback: function (result) {
                                        console.log(result);
                                    }
                                });

                            }
                        },
                        error: function (xhr) {
                            console.log(xhr);

                        }
                    });
                });

                $('#tbAddressResult').on('click', 'tbody .delete_btn', function () {
                    var data_row = oTableAddress.row($(this).closest('tr')).data();
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("DeleteDaftAddress", "Location")',
                        data: { AddressId: data_row.addressId },
                        dataType: "json",
                        success: function (data) {
                            if (data.status) {
                                var val = []
                                val = ConcatstrAddress(data.response);
                                oTableAddress.clear();
                                BindDatatable(oTableAddress, val);
                            }
                            else {
                                bootbox.confirm({
                                    title: "System Information",
                                    message: data.message,
                                    buttons: {
                                        cancel: {
                                            label: '<i class="fa fa-times"></i> Cancel'
                                        }
                                    },
                                    callback: function (result) {
                                        console.log(xhr);
                                    }
                                });
                            }
                        },
                        error: function (xhr, status, error) {
                            console.log(status);
                            bootbox.confirm({
                                title: "System Information",
                                message: xhr.responseText,
                                buttons: {
                                    cancel: {
                                        label: '<i class="fa fa-times"></i> Cancel'
                                    }
                                },
                                callback: function (result) {
                                    console.log('This was logged in the callback: ' + result);
                                }
                            });
                        }
                    });
                });
                $('#btnAddAddress').click(function () {
                    var stuff = [];


                    $(':checkbox:checked').each(function (i) {

                        //val[i] = $(this).parent().text().trim();

                        var data = {
                            AddressTypeId: $(this).val(),
                            address_type_name: $(this).parent().text().trim(),
                            Country: $('#ddlcountry option').filter(':selected').val(),
                            ZipCode: $('#ddlzipcode option').filter(':selected').val(),
                            HouseNo: $('#txthomenumber').val(),
                            Moo: $('#txtVillageNo').val(),
                            VillageName: $('#txtvillage').val(),
                            Building: $('#txtbuilding').val(),
                            Floor: $('#txtfloor').val(),
                            RoomNo: $('#txtroom').val(),
                            Soi: $('#txtsoi').val(),
                            Road: $('#txtroad').val(),
                            SubDistrictId: $('#ddlsubdistrict option').filter(':selected').val(),
                            sub_district_name: $('#ddlsubdistrict option').filter(':selected').text(),
                            DistrictId: $('#ddldistrict option').filter(':selected').val(),
                            district_name: $('#ddldistrict option').filter(':selected').text(),
                            ProvinceId: $('#ddlprovince option').filter(':selected').val(),
                            province_name: $('#ddlprovince option').filter(':selected').text(),
                            RegionId: $('#ddlzone option').filter(':selected').val(),
                            location_code: $('#txtlocationcode').val(),
                            CompanyId: $('#hdCompanyId').val(),
                            AddressId: $('#hdAddressID').val()
                        }
                        stuff.push(data);


                    });

                    var forms = document.getElementsByClassName('needs-validation-address');
                    var validation = Array.prototype.filter.call(forms, function (form) {
                        var failed = false;

                        if ($("[name='address_type_id']:checked").length == 0) {
                            $("[name='address_type_id']").attr('required', true);
                            failed = true;
                            $("[name='address_type_id']").parent().css({ color: '#e7515a' });
                        }
                        else {
                            $("[name='address_type_id']").attr('required', false);
                            $("[name='address_type_id']").parent().removeAttr('style');
                        }

                        if (ValidateAddress(".form-control.inputValidationAddress", ".custom-control-input.inputValidationAddress"
                            , ".custom-select.inputValidationAddress", ".custom-file-input.inputValidationAddress")) {
                            failed = true;
                        }

                        if (failed == true) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        else {
                            SaveDaftAddress(stuff);
                        }
                        form.classList.add('was-validated');
                    });

                });
                $('#btnClear').click(function () {
                    $('#txthomenumber').val('')
                    $('#txtVillageNo').val('')
                    $('#txtvillage').val('')
                    $('#txtbuilding').val('')
                    $('#txtfloor').val('')
                    $('#txtroom').val('')
                    $('#txtsoi').val('')
                    $('#txtroad').val('')
                    $('#ddlcountry').val('')
                    $('#ddlzone').val('')
                    $('#ddlprovince').val('').change();
                    $('#ddldistrict').val('').change();
                    $('#ddlsubdistrict').val('').change();
                    $('#ddlzipcode').val('');

                    $('#chkAddressType input[type=checkbox]').each(function () {
                        $(this).prop('checked', false);

                    });
                });
            });

            //'use strict';
            //window.addEventListener('load', function () {
            //    // Fetch all the forms we want to apply custom Bootstrap validation styles to
            //    var forms = document.getElementsByClassName('needs-validation');
            //    // Loop over them and prevent submission
            //    var validation = Array.prototype.filter.call(forms, function (form) {
            //        form.addEventListener('submit', function (event) {

            //            if (form.checkValidity() === false || ValidateUpload()) {
            //                event.preventDefault();
            //                event.stopPropagation();
            //            } else {
            //                onSave();
            //                event.preventDefault();
            //                event.stopPropagation();
            //            }
            //            form.classList.add('was-validated');
            //        }, false);
            //    });
            //}, false);

        function inittbSearchResult() {

               var oTable = $('#tbSearchLocationResult').DataTable({
                processing: true, // for show progress bar
                serverSide: true, // for process server side
                filter: false, // this is for disable filter (search box)
                orderMulti: false, // for disable multiple column at once
                pageLength: 10,
                order: [],
                autoWidth: false,
                searching: false,
                destroy: true,
                lengthChange: false,
                "oLanguage": {
                    "oPaginate": { "sPrevious": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>', "sNext": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>' },
                    "sInfo": "Showing page _PAGE_ of _PAGES_",
                    "sSearch": false,
                    "sLengthMenu": "Results :  _MENU_",
                },
                 "scrollX": false,
                  "language": {
                  "zeroRecords": "No data found.",
                   "decimal": ",",
                  "thousands": "."
                    },
                    ajax: {
                        url: '@Url.Action("Search", "Location")',
                        type: "POST",
                        datatype: "JSON",
                        //dataSrc:"",
                        data: function (d) {
                            d.locationCode = $("#inputLocationCodeMain").val(),
                            d.locationNameAilas = $("#inputLocationNameAilas").val(),
                            d.locationNameTh = $("#inputLocationNameTh").val(),
                            d.locationNameEn = $("#inputLocationNameEn").val(),
                            d.storageLocation = $("#inputStorageLocation").val(),
                            d.phoneNo = $("#inputPhoneNoMain").val()

                        }
                    },
                    columns: [

                        {
                            data: null, width: "10%", render: function (data, type, row) {
                                if (row.CompanyStatus == 'A') {
                                    return "  <ul class='table-controls'><li> <a href='#' onclick=openModal('edit','" + row.LocationId + "');return false;  data-toggle='modal' data-target='.bd-addedit-modal-xl' data-original-title='แก้ไข'><svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-edit'><path d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'></path><path d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'></path></svg></a></li>";
                                } else {
                                    return "  <ul class='table-controls'><li> <a href='#' onclick=openModal('edit','" + row.LocationId + "');return false;  data-toggle='modal' data-target='.bd-addedit-modal-xl' data-original-title='แก้ไข'><svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-edit'><path d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'></path><path d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'></path></svg></a></li> <li> <a onclick=deleteData('" + row.LocationId + "');return false; href='#'  data-toggle='tooltip' data-placement='top' title='Delete'><svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-trash-2'><polyline points='3 6 5 6 21 6'></polyline><path d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'></path><line x1='10' y1='11' x2='10' y2='17'></line><line x1='14' y1='11' x2='14' y2='17'></line></svg></a>";

                                }
                            }
                           // orderable: false,
                            //className: 'text-center'
                        },
                        { "data": "LocationCode", "width": "20%"  },
                        { "data": "LocationNameTh", "width": "25%" },
                        { "data": "LocationNameEn", "width": "25%" },
                        { "data": "StorageLocation", "width": "20%" }
                ],
                "order": [[0, "desc"]],
                "stripeClasses": [],
                drawCallback: function () { $('.dataTables_paginate > .pagination').addClass(' pagination-style-13 pagination-bordered mb-5'); }

                });

        }

        function inittbAddressResult() {
            oTableAddress = $('#tbAddressResult').DataTable({
                processing: true, // for show progress bar
                //serverSide: true, // for process server side
                filter: false, // this is for disable filter (search box)
                orderMulti: false, // for disable multiple column at once
                pageLength: 10,
                order: [],
                autoWidth: false,
                searching: false,
                destroy: true,
                lengthChange: false,
                paging: false,
                "oLanguage": {
                    //"oPaginate": { "sPrevious": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>', "sNext": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>' },
                    //"sInfo": "Showing page _PAGE_ of _PAGES_",
                    "sSearch": false,
                    "sLengthMenu": "Results :  _MENU_",
                },
                "scrollX": false,
                "language": {
                    "zeroRecords": "No data found.",
                    "decimal": ",",
                    "thousands": "."
                },
                columns: [


                    { "data": "addressId", "visible": false },
                    { "data": "address_type_id", "visible": false },
                    { "data": "address_type", orderable: true, },
                    { "data": "address", orderable: true, },
                    {
                        data: null, width: "10%", orderable: false, render: function (data, type, row) {
                            return "<a href='#'class='edit_btn'  data-toggle='modal' data-target='.bd-addedit-modal-xl' data-original-title='แก้ไข'><svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-edit'><path d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'></path><path d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'></path></svg></a>";
                        }
                    },
                    {
                        data: null, width: "10%", orderable: false, render: function (data, type, row) {
                            return "<a href='#' class='delete_btn'  data-toggle='modal' data-target='.bd-addedit-modal-xl' data-original-title='ลบ'><svg xmlns='http://www.w3.org/2000/svg'width='24' height='24' style='-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);' preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24'><g fill='none' stroke='#626262' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M3 6h18'/><path d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'/></g></svg></a>";
                        }
                    },
                ],
                "order": [[1, "desc"]],
                "stripeClasses": [],
                // drawCallback: function () { $('.dataTables_paginate > .pagination').addClass(' pagination-style-13 pagination-bordered mb-5'); }

            });
        }

        function openModal(mode, locationId) {

            clearData();

            $('#hdMode').val(mode);
            $('#hdLocationId').val(locationId);

            BindRegion();
            BindDDLprovince();
            BindDDLdistrict();
            BindDDLsubdistrict();

            if (mode == "edit") {
                //$("#txtCompanyCode").prop("disabled", true);
                $("#hTitleEdit").text('@Localizer["EditLocation"]');
                $("#frNew")[0].reset();
                getDataById(locationId);
            }
            else {
                $("#hTitleEdit").text('@Localizer["AddLocation"]');
                $("#btnSave").show();

                $("#frNew")[0].reset();
                //form.find('button').on('click', (event) => {
                //    form.find('input, select, textarea').val('');
                //});
            }

            $('#AddEditModal').modal('show');

        }

        function GetAddress() {
            // inittbAddressResult(companyId);
            $.ajax({
                url: '@Url.Action("GetAddress", "Location")',
                type: "POST",
                data: {
                    locationid: function () {
                        return $('#hdLocationId').val();
                    }
                },
                datatype: "JSON",
            }).done(function (data) {
                var val = []
                val = ConcatstrAddress(data.data);
                data.data = val;
                oTableAddress.clear().draw();
                oTableAddress.rows.add(data.data).draw();
            }).fail(function (xhr) {
                console.log(xhr);
            });
        }
        function BindRegion() {
            $.ajax({
                type: "POST",
                url: '@Url.Action("DDLsubcontract_profile_Region", "Account")',
                //data: { province_id: province },
                dataType: "json",
                success: function (data) {

                    if (data != null) {
                        $('#ddlzone').empty();

                        $.each(data.responseregion, function () {
                            $('#ddlzone').append($("<option></option>").val(this.Value == "0" ? "" : this.Value).text(this.Text));
                        });
                    }


                },
                error: function (xhr) {

                    console.log(xhr);
                }
            });
        }
        function BindDDLprovince(regionid) {
            $.ajax({
                type: "POST",
                async: false,
                url: '@Url.Action("DDLsubcontract_profile_province", "Account")',
                data: { region_id: regionid },
                dataType: "json",
                success: function (data) {

                    if (data != null) {
                        $('#ddlprovince').empty();
                        $.each(data.responseprovince, function () {
                            $('#ddlprovince').append($('<option></option>').val(this.Value == "0" ? "" : this.Value).text(this.Text));
                        });
                    }


                },
                error: function (xhr) {

                    console.log(xhr);
                }
            });
        }
        function BindDDLdistrict(province) {
            $.ajax({
                type: "POST",
                async: false,
                url: '@Url.Action("DDLsubcontract_profile_district", "Account")',
                data: { province_id: province },
                dataType: "json",
                success: function (data) {

                    if (data != null) {
                        $('#ddldistrict').empty();

                        $.each(data.responsedistricrt, function () {
                            $('#ddldistrict').append($("<option></option>").val(this.Value == "0" ? "" : this.Value).text(this.Text));
                        });
                    }


                },
                error: function (xhr, status, error) {

                    console.log(xhr);
                }
            });
        }
        function BindDDLsubdistrict(district) {
            $.ajax({
                type: "POST",
                async: false,
                url: '@Url.Action("DDLsubcontract_profile_sub_district", "Account")',
                data: { district_id: district },
                dataType: "json",
                success: function (data) {

                    if (data != null) {
                        $('#ddlsubdistrict').empty();
                        $('#ddlzipcode').empty();

                        $.each(data.responsesubdistrict, function () {

                            $('#ddlsubdistrict').append($("<option></option>").val(this.Value == "0" ? "" : this.Value).text(this.Text));
                        });
                        $.each(data.responsezipcode, function () {

                            $('#ddlzipcode').append($("<option></option>").val(this.Value).text(this.Text));


                        })

                        $('#ddlzipcode').val("")
                    }


                },
                error: function (xhr) {

                    console.log(xhr);
                }
            });
        }
        function BindAddressType() {
            $.ajax({
                type: "POST",
                async: false,
                url: '@Url.Action("GetAddressType", "Account")',
                //data: { province_id: province },
                dataType: "json",
                success: function (data) {
                    if (data != null) {

                        $.each(data.responseaddresstype, function () {
                            var strtext = this.Text;
                            var strvalue = this.Value;
                            $('#chkAddressType input[type=checkbox]').each(function () {

                                if ($(this).val() == strvalue) {
                                    var id = $(this).attr("id");

                                    $(this).next('span').after(strtext);
                                }
                            });

                        });
                    }


                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }
        function BindDatatable(table, datamodel) {

            table.rows.add(datamodel).draw();

        }

        function SaveDaftAddress(stuff) {
            $.ajax({
                type: "POST",
                url: '@Url.Action("SaveDaftAddress", "Location")',
                data: { daftdata: stuff },
                dataType: "json",
                success: function (data) {

                    if (data.status) {
                        var val = []
                        val = ConcatstrAddress(data.response);
                        data.data = val;
                        oTableAddress.clear().draw();
                        oTableAddress.rows.add(data.data).draw();
                    }
                    else {
                        bootbox.confirm({
                            title: "System Information",
                            message: data.message,
                            buttons: {
                                cancel: {
                                    label: '<i class="fa fa-times"></i> Cancel'
                                }
                            },
                            callback: function (result) {
                                console.log('This was logged in the callback: ' + result);
                            }
                        });
                    }

                },
                error: function (xhr) {

                    console.log(xhr);
                }
            });
        }
        function ConcatstrAddress(data) {
            var val = [];

            $.each(data, function () {
                if (this.outFullAddress != null && this.outFullAddress != "") {
                    var strdata = {
                        addressId: this.AddressId,
                        address_type_id: this.AddressTypeId,
                        address_type: this.address_type_name,
                        address: this.outFullAddress
                    };

                    val.push(strdata);
                }
                else {
                    var strnumber = this.HouseNo != '' && this.HouseNo != null ? this.HouseNo : '';
                    var strvillage = this.VillageName != '' && this.VillageName != null ? $('#txtvillage').parent().parent().text().split(":")[0].trim() + ' ' + this.VillageName : '';
                    var strvillageno = this.Moo != '' && this.Moo != null ? $('#txtVillageNo').parent().parent().text().split(":")[1].trim() + ' ' + this.Moo : '';

                    var strbuilding = this.Building != '' && this.Building != null ? $('#txtbuilding').parent().parent().text().split(":")[0].trim() + ' ' + this.Building : '';
                    var strfloor = this.Floor != '' && this.Floor != null ? $('#txtfloor').parent().parent().text().split(":")[0].trim() + ' ' + this.Floor : '';
                    var strroom = this.RoomNo != '' && this.RoomNo != null ? $('#txtroom').parent().parent().text().split(":")[1].trim() + ' ' + this.RoomNo : '';
                    var strsoi = this.Soi != '' && this.Soi != null ? $('#txtsoi').parent().parent().text().split(":")[0].trim() + ' ' + this.Soi : '';

                    var strroad = this.Road != '' && this.Road != null ? $('#txtroad').parent().parent().text().split(":")[0].trim() + ' ' + this.Road : '';
                    var strsubdistrict = this.SubDistrictId != '' && this.SubDistrictId != null ? $('#ddlsubdistrict').parent().parent().text().split(":")[0].trim() + ' ' +
                        this.sub_district_name : '';
                    var strdistrict = this.DistrictId != 0 && this.DistrictId != null ? $('#ddldistrict').parent().parent().text().split(":")[0].trim() + ' ' +
                        this.district_name : '';
                    var strprovince = this.ProvinceId != 0 && this.ProvinceId != null ? $('#ddlprovince').parent().parent().text().split(":")[0].trim() + ' ' +
                        this.province_name : '';

                    var strzipcode = this.ZipCode != '' && this.ZipCode != null ? $('#ddlzipcode').parent().parent().text().split(":")[0].trim() + ' ' +
                        this.ZipCode : '';

                    var strdata = {
                        addressId: this.AddressId,
                        address_type_id: this.AddressTypeId,
                        address_type: this.address_type_name,
                        address: strnumber.trim() + ' ' + strvillage.trim() + ' ' + strvillageno.trim() + ' ' + strbuilding.trim() + ' ' + strfloor.trim() + ' ' +
                            strroom.trim() + ' ' + strsoi.trim() + ' ' + strroad.trim() + ' ' + strsubdistrict.trim() + ' ' + strdistrict.trim() + ' ' +
                            strprovince.trim() + ' ' + strzipcode.trim(),
                    };

                    val.push(strdata);
                }


            });


            return val;
        }

        function clearMainData() {
            $("#inputLocationCodeMain").val(''),
                $("#inputLocationNameAilas").val(''),
                $("#inputLocationNameTh").val(''),
                $("#inputLocationNameEn").val(''),
                $("#inputStorageLocation").val(''),
                $("#inputPhoneNoMain").val('')
        }

        function clearData() {

            $('#hdLocationId').val('');
            $('#inputLocationCode').val('');
            $('#inputLocationAlias').val('');
            $('#inputLocationNameT').val('');
            $('#inputLocationNameE').val('');
            $('#inputStorage').val('');
            $('#inputShip').val('');
            $('#inoutOutStorage').val('');
            $('#inputVat').val('');
            $('#inputPhoneNo').val('');
            $('#inputMainPhone').val('');
            $('#inputInstallationsPhone').val('');
            $('#inputMaintenencePhone').val('');
            $('#inputInventoryPhone').val('');
            $('#inputPaymentPhone').val('');
            $('#inputEtcPhone').val('');
            $('#inputCompanyMail').val('');
            $('#inputInstallationMail').val('');
            $('#inputMaintanenceMail').val('');
            $('#inputInventoryMail').val('');
            $('#inputPaymentMail').val('');
            $('#inputEtcMail').val('');
            $('#inputLocationAddress').val('');
            $('#inputPostAddress').val('');
            $('#inputTaxAddress').val('');
            $('#inputWTAddress').val('');
            $('#inputBankCode').val('');
            $('#inputBankName').val('');
            $('#inputBankAccountNo').val('');
            $('#inputBankAccountName').val('');
            $('#inputBankBranchNo').val('');
            $('#inputBankBranchName').val('');
            $('#inputPanaltyPhone').val('');
            $('#inputPanaltyMail').val('');
            $('#inputContractPhone').val('');
            $('#inputContractMail').val('');
            $('#hdCompanyId').val('');

            $('#hdupfileBankAttach').val('');
            $('#lbfileBankAttach').text('@Localizer["ChooseFile"]');
            $('#inputBankAttach').val('');

   

            $('#frNew').removeClass('was-validated');
        }

        function getDataById(locationId) {
              $.ajax({
                  url: '@Url.Action("GetDataById", "Location")',
                  type: 'POST',
                  data: { 'locationId': locationId},
                  dataType: "json",
              success: function (result) {
                  console.log(result)
                  if (result != null) {


                      if (result.CompanyStatus == 'A') {
                          $("#btnSave").hide();
                      } else {
                          $("#btnSave").show();
                      }


                      $("#lblcompanyName").text(result.CompanyNameTh);

                      $('#inputLocationCode').val(result.LocationCode);

                      $('#inputLocationAlias').val(result.LocationNameAlias);
                      $('#inputLocationNameT').val(result.LocationNameTh);
                      $('#inputLocationNameE').val(result.LocationNameEn);
                      $('#inputStorage').val(result.StorageLocation);
                      $('#inputShip').val(result.ShipTo);
                      $('#inoutOutStorage').val(result.OutOfServiceStorageLocation);
                      $('#inputVat').val(result.VatBranchNumber);
                      $('#inputPhoneNo').val(result.Phone);
                      $('#inputMainPhone').val(result.CompanyMainContractPhone);
                      $('#inputInstallationsPhone').val(result.InstallationsContractPhone);
                      $('#inputMaintenencePhone').val(result.MaintenanceContractPhone);
                      $('#inputInventoryPhone').val(result.InventoryContractPhone);
                      $('#inputPaymentPhone').val(result.PaymentContractPhone);
                      $('#inputEtcPhone').val(result.EtcContractPhone);
                      $('#inputCompanyMail').val(result.CompanyGroupMail);
                      $('#inputInstallationMail').val(result.InstallationsContractMail);
                      $('#inputMaintanenceMail').val(result.MaintenanceContractMail);
                      $('#inputInventoryMail').val(result.InventoryContractMail);
                      $('#inputPaymentMail').val(result.PaymentContractMail);
                      $('#inputEtcMail').val(result.EtcContractMail);

                      //$('#inputLocationAddress').val(result.LocationAddress);

                      //$("#inputPostAddress").val(result.PostAddress)
                      //$("#inputTaxAddress").val(result.TaxAddress)
                      //$("#inputWTAddress").val(result.WtAddress)

                      $('#inputBankCode').val(result.BankCode);
                      $('#inputBankName').val(result.BankName);
                      $('#inputBankAccountNo').val(result.BankAccountNo);
                      $('#inputBankAccountName').val(result.BankAccountName);
                      $('#inputBankBranchNo').val(result.BankBranchCode);
                      $('#inputBankBranchName').val(result.BankBranchName);
                      $('#inputPanaltyPhone').val(result.PenaltyContractPhone);
                      $('#inputPanaltyMail').val(result.PenaltyContractMail);
                      $('#inputContractPhone').val(result.ContractPhone);
                      $('#inputContractMail').val(result.ContractMail);
                      $('#hdCompanyId').val(result.CompanyId);

                      if (result.BankAttachFile != null) {
                          $('#lbfileBankAttach').text(result.BankAttachFile);
                          $('#hdupfileBankAttach').val(result.file_id__BankAttach);

                          $('#linkdownload').text(result.BankAttachFile);
                          DownloadFile(result.BankAttachFile, $('#linkdownload'));
                      }

                      GetAddress();

                  }
                  },
                  error: function (result) {

                  }

            });
    }

        function onSave() {
            //var location = new Object();

            //location.LocationId = $('#hdLocationId').val();
            //location.LocationCode = $('#inputLocationCode').val();
            //location.LocationNameAlias =  $('#inputLocationAlias').val();
            //location.LocationNameTh = $('#inputLocationNameT').val();
            //location.LocationNameEn =$('#inputLocationNameE').val();
            //location.StorageLocation =$('#inputStorage').val();
            //location.ShipTo =$('#inputShip').val();
            //location.OutOfServiceStorageLocation =$('#inoutOutStorage').val();
            //location.VatBranchNumber =$('#inputVat').val();
            //location.Phone =$('#inputPhoneNo').val();
            //location.CompanyMainContractPhone =$('#inputMainPhone').val();
            //location.InstallationsContractPhone =$('#inputInstallationsPhone').val();
            //location.MaintenanceContractPhone =$('#inputMaintenencePhone').val();
            //location.InventoryContractPhone =$('#inputInventoryPhone').val();
            //location.PaymentContractPhone =$('#inputPaymentPhone').val();
            //location.EtcContractPhone =$('#inputEtcPhone').val();
            //location.CompanyGroupMail = $('#inputCompanyMail').val();
            //location.InstallationsContractMail =$('#inputInstallationMail').val();
            //location.MaintenanceContractMail =$('#inputMaintanenceMail').val();
            //location.InventoryContractMail =$('#inputInventoryMail').val();
            //location.PaymentContractMail = $('#inputPaymentMail').val();
            //location.EtcContractMail = $('#inputEtcMail').val();

            //location.LocationAddress =$('#inputLocationAddress').val();

            //location.PostAddress = $("#inputPostAddress").val()
            //location.TaxAddress =$("#inputTaxAddress").val()
            //location.WtAddress =$("#inputWTAddress").val()

            //location.BankCode = $('#inputBankCode').val();
            //location.BankName =$('#inputBankName').val();
            //location.BankAccountNo =$('#inputBankAccountNo').val();
            //location.BankAccountName =$('#inputBankAccountName').val();
            //location.BankBranchCode =$('#inputBankBranchNo').val();
            //location.BankBranchName =$('#inputBankBranchName').val();
            //location.PenaltyContractPhone =$('#inputPanaltyPhone').val();
            //location.PenaltyContractMail =$('#inputPanaltyMail').val();
            //location.ContractPhone = $('#inputContractPhone').val();
            //location.ContractMail = $('#inputContractMail').val();
            //location.CompanyId = $('#hdCompanyId').val();

            var formData = new FormData();

            formData.append("LocationId", $('#hdLocationId').val());
            formData.append("LocationCode", $('#inputLocationCode').val());
            formData.append("LocationNameAlias", $('#inputLocationAlias').val());
            formData.append("LocationNameTh", $('#inputLocationNameT').val());
            formData.append("LocationNameEn", $('#inputLocationNameE').val());
            formData.append("StorageLocation", $('#inputStorage').val());
            formData.append("ShipTo", $('#inputShip').val());
            formData.append("OutOfServiceStorageLocation", $('#inoutOutStorage').val());
            formData.append("VatBranchNumber", $('#inputVat').val());
            formData.append("Phone", $('#inputPhoneNo').val());
            formData.append("CompanyMainContractPhone", $('#inputMainPhone').val());
            formData.append("InstallationsContractPhone", $('#inputInstallationsPhone').val());
            formData.append("MaintenanceContractPhone", $('#inputMaintenencePhone').val());
            formData.append("InventoryContractPhone", $('#inputInventoryPhone').val());
            formData.append("PaymentContractPhone", $('#inputPaymentPhone').val());
            formData.append("EtcContractPhone", $('#inputEtcPhone').val());
            formData.append("CompanyGroupMail", $('#inputCompanyMail').val());
            formData.append("InstallationsContractMail", $('#inputInstallationMail').val());
            formData.append("MaintenanceContractMail", $('#inputMaintanenceMail').val());
            formData.append("InventoryContractMail", $('#inputInventoryMail').val());
            formData.append("PaymentContractMail", $('#inputPaymentMail').val());
            formData.append("EtcContractMail", $('#inputEtcMail').val());

            formData.append("LocationAddress", $('#inputLocationAddress').val());

            formData.append("PostAddress", $("#inputPostAddress").val());
            formData.append("TaxAddress", $("#inputTaxAddress").val());
            formData.append("WtAddress", $("#inputWTAddress").val());

            formData.append("BankCode", $('#inputBankCode').val());
            formData.append("BankName", $('#inputBankName').val());
            formData.append("BankAccountNo", $('#inputBankAccountNo').val());
            formData.append("BankAccountName", $('#inputBankAccountName').val());
            formData.append("BankBranchCode", $('#inputBankBranchNo').val());
            formData.append("BankBranchName", $('#inputBankBranchName').val());
            formData.append("PenaltyContractPhone", $('#inputPanaltyPhone').val());
            formData.append("PenaltyContractMail", $('#inputPanaltyMail').val());
            formData.append("ContractPhone", $('#inputContractPhone').val());
            formData.append("ContractMail", $('#inputContractMail').val());
            formData.append("CompanyId", $('#hdCompanyId').val());

            formData.append("File_BankAttach", $('#inputBankAttach').get(0).files[0]);
            formData.append("BankAttachFile", $('#lbfileBankAttach').text());

            $.ajax({
                   url: '@Url.Action("OnSave", "Location")',
                   type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                async: false,
                success: function (result) {
                       if (result.Status == true) {

                               bootbox.alert(result.Message);
                               clearData();

                           inittbSearchResult();
                           $('#AddEditModal').modal('hide');

                          }
                        else {
                               bootbox.alert(result.Message);

                            }
                  },
                  error: function (result) {
                      bootbox.alert(result.Message);
                  }

            });

        }

         function deleteData(locationId) {
           bootbox.confirm("@Localizer["QuestionDelete"]?"
            , function (result) {
            if (result == true) {
                 $.ajax({
                   url: '@Url.Action("OnDelete", "Location")',
                   type: 'POST',
                     data: { 'locationId': locationId },
                   dataType: "json",
                     success: function (result) {
                         if (result.Status == true) {
                             inittbSearchResult();
                             bootbox.alert(result.Message);
                         }
                  },
                  error: function (result) {
                      bootbox.alert(result.Message);
                  }

            });
            }
        });
        }

        function CheckFileUpload(inputId) {
            var input = document.getElementById(inputId);
            var files = input.files[0];
            var formData = new FormData();

            formData.append("files", files);

            $.ajax(
                {
                    type: "POST",
                    url: '@Url.Action("CheckFileUpload", "Location")',
                    processData: false,
                    contentType: false,
                    dataType: "json",
                    data: formData,
                    success: function (data) {

                        if (data.status) {
                            $('#hdupfileBankAttach').val(data.file_id);
                        }
                        else {
                            $('#lbfileBankAttach').text('@Localizer["ChooseFile"]');
                            $('#hdupfileBankAttach').val('');
                        }

                        bootbox.alert({
                            title: "System Information",
                            message: data.message,
                            size: "small",
                            callback: function (result) {
                                console.log('This was logged in the callback: ' + data.status);
                            }
                        });

                    },
                    error: function () {

                    }
                }
            );
        }

        function ValidateUpload() {
            var hasError = false;
            if ($('#hdupfileBankAttach').val() == "") {
                hasError = true;
                $("#inputBankAttach").attr('required', 'required');
            }
            else {
                $("#inputBankAttach").removeAttr('required');
            }

            return hasError;
        }

        function Validateform() {
            var haserror = false;
            var hasUser;
            if ($('#hdMode').val() != "edit") {
                var resultlocationcode = CheckLocationcode();
                if (resultlocationcode.Status) {
                    $('.chklocation').hide();
                }
                else {
                    $('.chklocation').text(resultlocationcode.Message);
                    $('.chklocation').show();
                }
                hasUser = resultlocationcode.Status;
            }
            else {
                hasUser = true;
            }

            if ($('#inputLocationCode').val() == '' || $('#inputLocationNameT').val() == '' ||
                $('#inputPhoneNo').val() == '' || $('#inputMainPhone').val() == '' || $('#inputInstallationsPhone').val() == '' ||
                $('#inputMaintenencePhone').val() == '' || $('#inputBankName').val() == '' || $('#inputBankAccountNo').val() == '' ||
                $('#inputBankAccountName').val() == '' || $('#inputBankBranchName').val() == '' || !hasUser) {
                haserror = true;
            }
            return haserror;
        }

        function ValidateAddress(formcontrol, custom, customselect, cutomupload) {
            var hasError = false;

            $(formcontrol).each(function () {
                var $this = $(this);
                var fieldvalue = $this.val();
                var type = $this.attr("type");
                var tag = $this[0].tagName;

                if (tag == "INPUT" && type == "text") {
                    if (fieldvalue == "") {

                        hasError = true;
                    }
                }
                else if (tag == "INPUT" && type == "password") {
                    if (fieldvalue == "") {

                        hasError = true;
                    }
                }
                else if ($this.is('select')) {
                    if (fieldvalue == "0") {

                        hasError = true;
                    }
                }
                else if (tag == "INPUT" && type == 'radio') {
                    if (!fieldvalue) {

                        hasError = true;
                    }
                }
                else if (tag == "INPUT" && type == 'checkbox') {
                    if (!fieldvalue) {

                        hasError = true;

                    }
                }
                else if (type == "hidden") {
                    if (fieldvalue == "") {

                        hasError = true;
                    }
                }
            }); //Input
            $(custom).each(function () {
                var $this = $(this);

                var type = $this.attr("type");
                var tag = $this[0].tagName;
                var fieldvalue = $this.is(":checked");

                if (tag == "INPUT" && type == 'radio') {
                    if (!fieldvalue) {

                        hasError = true;

                    }
                }
                else if (tag == "INPUT" && type == 'checkbox') {
                    if (!fieldvalue) {

                        hasError = true;

                    }
                }
            });//radio,check box
            $(customselect).each(function () {
                var $this = $(this);

                var type = $this.attr("type");
                var tag = $this[0].tagName;
                var fieldvalue = $this.val();

                if ($this.is('select')) {
                    if (fieldvalue == "") {

                        hasError = true;
                    }
                }
            });//custom selete
            $(cutomupload).each(function () {
                var $this = $(this);
                var fieldvalue = $this.files;
                if ($this.is('input')) {
                    var s = $(this).val().split("\\").pop();
                    if (fieldvalue == "") {

                        hasError = true;
                    }
                }
            });//customupload
            return hasError;
        }

        function CheckLocationcode(mode) {

            var jqXHR = $.ajax({
                type: "POST",
                async: false,
                url: '@Url.Action("CheckLocationCode", "Location")',
                data: { locationcode: $('#inputLocationCode').val() },
                dataType: "json"
            });
            return jqXHR.responseJSON;
        }

        function DownloadFile(filename, linkdownload) {
            var urlDownloadfile = '@Url.Action("DownloadfileLocation", "Location")';

            linkdownload.attr("href", urlDownloadfile + '?locationid=' + $('#hdLocationId').val() + '&&filename=' + filename);

        }

    </script>

}
